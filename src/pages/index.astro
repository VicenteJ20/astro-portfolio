---
import { getCollection } from "astro:content";
import BaseLayout from "../layouts/BaseLayout.astro";
import Link from "../components/Link.astro";
import LinkedinIcon from "../icons/LinkedinIcon.astro";
import GithubIcon from "../icons/GithubIcon.astro";
import TwitterIcon from "../icons/TwitterIcon.astro";
import BasicCard from "../components/BasicCard.astro";
import BasicHeader from "../components/BasicHeader.astro";
import allExperience from "../json/experience.json";
import ExperienceCard from "../components/ExperienceCard.astro";

import type { PostBasicProps } from "../interfaces/Posts";
const allPosts = (await getCollection("posts")).slice(-3);
const allProjects = (await getCollection("projects")).slice(-3);
---

<BaseLayout pageTitle="Inicio">
  <main class="flex flex-col gap-14">
    <section class="py-32 md:py-44 flex flex-col gap-6 xl:max-w-[60%]">
      <h1 class="text-3xl lg:text-4xl font-semibold">
        Hola, soy Vicente!
      </h1>
      <p class="text-base font-base text-zinc-200 inset-1.5">
        Soy <span class="text-lime-400">Analista programador</span> y <span
          class="text-lime-400">Desarrollador web full-stack</span
        > con más de 3 años de experiencia desarrollando soluciones full-stack
        <span class="italic">(frontend + backend + infraestructura).</span> Actualmente
        mi stack de preferencia es NextJS + TypeScript + Prisma + AWS, sin embargo,
        cuento otras habilidadesy tecnologías que encontrarás en mis proyectos y
        posts.
      </p>
      <ul class="flex gap-8 items-center">
        <li>
          <Link
            href="https://www.linkedin.com/in/vicentejorquera"
            type="external"
            text=""
            icon={true}
          >
            <LinkedinIcon classes="w-9 fill-zinc-200" />
          </Link>
        </li>
        <li>
          <Link
            href="https://www.linkedin.com/in/vicentejorquera"
            type="external"
            text=""
            icon={true}
          >
            <GithubIcon classes="w-9 fill-zinc-200" />
          </Link>
        </li>
        <li>
          <Link
            href="https://www.linkedin.com/in/vicentejorquera"
            type="external"
            text=""
            icon={true}
          >
            <TwitterIcon classes="w-9 fill-zinc-200" />
          </Link>
        </li>
      </ul>
    </section>
    <section class="flex flex-col gap-y-4">
      <BasicHeader
        title="últimos posts"
        titleBtn="Ver todos los posts"
        refBtn="/blog"
      />
      <section class="grid grid-cols-1 md:grid-cols-2 gap-4">
        {
          allPosts.map((post: PostBasicProps) => (
            <BasicCard
              title={post.data.title}
              description={post.data.description}
              id={post.id}
              date={post.data.pubDate}
              slug={post.data.slug}
              type="blog"
            />
          ))
        }
      </section>
    </section>
    <section class="flex flex-col gap-y-4">
      <BasicHeader
        title="últimos proyectos"
        titleBtn="Ver todos los proyectos"
        refBtn="/proyectos"
      />
      <section class="flex flex-col gap-4">
        {
          allProjects.map((project: PostBasicProps) => (
            <BasicCard
              title={project.data.title}
              description={project.data.description}
              id={project.id}
              date={project.data.pubDate}
              slug={project.data.slug}
              type="proyectos"
            />
          ))
        }
      </section>
    </section>
    <section class="flex flex-col gap-y-4">
      <BasicHeader title="Experiencia laboral reciente" />
      <section class="flex flex-col gap-4">
        {
          allExperience.map((experience) => (
            <ExperienceCard item={experience} />
          ))
        }
      </section>
    </section>
  </main>
</BaseLayout>
